<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/d3-simple-slider"></script>
  <script src="https://unpkg.com/simple-statistics@7.0.2/dist/simple-statistics.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
  <link href="style.css" rel="stylesheet" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  <style>
    *{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body{
    width: 100%;
    height: 100%;
    font-family:Helvetica Neue,metric,sans-serif;
    text-rendering: optimizeLegibility;
}

.center{
    width: 500px;
    margin:auto
}

text{
    font-family: metric,sans-serif;
}

.ml {
    text-align: left
}

svg {
    overflow: hidden;
    margin: auto
}

.axis line, .axis path{
    stroke: #2E3532;
    stroke-width:1px;
}

.axisTitle, .axis text{
    fill: #2E3532;
    font-size:12px;
}

.background {
    fill: #FBFBFB;
    stroke: #2E3532;
}

.axisTitle, .chartTitle{
    text-anchor: middle
}


.ytitle {
    text-anchor: middle;
    transform: rotate(90deg)
}

.warningtext{
    text-anchor: center;
    fill: #F06449;
}

.regLine {
    stroke: #F06449;
    stroke-width:2px;
    opacity:0.7
}

.circle {
    fill: #4ECDC4;
    stroke: #292f36;
    stroke-width:0.3px
}

table {
    margin:auto;
    text-align:left;
    border-spacing: 15px 5px;
    border: 1px solid #2E3532
}

th {
    text-align: center;
    color:#F06449
}


tr {
    fill: #2E3532;
    font-size:10px
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: auto;
  background-color: #F06449;
  color: #FFFFFF;
  text-align: center;
  border-radius: 10px;
  padding: 0 5px 0 5px;
  /* Position the tooltip */
  position: absolute;
  z-index: 1;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}
.bar {
    fill: #4ECDC4;
    stroke:#292f36;
}
.bar:hover {
    fill: #F06449;
    stroke:#292f36;
    stroke-width:1px;
}

.radio {
    margin: auto;
    width : 200px;
}

.wrapper {
    display: grid;
    margin: 50px 50px 50px 50px;
    gap: 10px 20px;
    grid-auto-rows: minmax(20px, auto);
    text-align: center;
    place-items: center;
}

.mainTitle, .summarizeTitle {
    height:30px;
    width: auto;
    border-radius: 2px;
    padding: 0 45px 0 45px;
    border-style: solid;
    border-width:1px;
    box-shadow: 2px 2px 1px rgba(0,0,0,0.1);
    color:  #2E3532;
    background: #FBFBFB;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

.slidecontainer{
    width: 50%;
}

  </style>
</head>
<body>

  <script type="text/javascript">
    // structure of JSON
// { xLabel: string,
//   yLabel: string,
//   series: [ tests ] }
//
// tests := { name: string,
//            description: { start : int, sampling: float, stabilize: bool,
//                           quota: float, limit: int, instances: [string],
//                           samples: int, time : float}
//            dataset: [ point ],
//            kde : [ v: float ] (optional)
//            result: { estimate: float, r_square: float (optional) } }
//
// point := { x : double,
//            y : double }
//
// xLabel and yLabel are the same for any tests
window.onload = function () {

const wsvg = 600;
const hsvg = 400;
const wslider = 200;
const hslider = 50;
const margin = {left:50,right:50,top:20,bottom:50};
const dotSize = 1.5;
const innerW = wsvg-(margin.left+margin.right);
const innerH = hsvg-(margin.top+margin.bottom);

const marginbar = {left:150,right:150,top:50,bottom:50};
const wbar = 900;
const innerWbar = wbar-(marginbar.left+marginbar.right);

const SQRT_2PI = Math.sqrt(2 * Math.PI);

// Main function : place containers and call plot functions.
function render(inputs) {
    inputs.series.forEach(
	function(serie) {
	    serie.dataset.forEach(
		function(d) {
		    d.x = +d.x;
		    d.y = +d.y;
		});}
    );

    // First step : check if there is no kde/histogram data at all in
    // the benchmarks, in which case, we want to reduce our layout to
    // one column.
    let nonempty_kde = false;
    inputs.series.forEach(function (serie) {
	if ('kde' in serie) {
	    nonempty_kde = nonempty_kde || true;} });
    const nb_col = nonempty_kde ? 2 : 1;

    // ************************************************ //
    //              Layout of the page                  //
    // ************************************************ //
    // + a summarize bar graph on top
    // + one section for each benchmark which includes
    //     * 1 title
    //     * 1 linear regression graph and its title and information table
    //     * if kde data are available a histogram/kde graph with its control panel.
    //
    // If none of the benchmarks has kde data, the layout is the same
    // but with only one column (no hist/kde graphs).
    //
    //
    //              c1:        c2:
    //
    // r1:            *title*
    //           ___________________
    // r2:      |   summarize bar   |
    //          |___________________|
    //
    // r3:           *title-1*
    //
    // r4:        *title*   *radio*
    //           _______     _______
    // r5:      | lr-1  |   | kde-1 |
    //          |_______|   |_______|
    //
    // r6:      *infos-1*   *slider-1*
    // ..
    // r(4i+3):       *title-i*
    //
    // r(4i+4):  *title*     *radio*
    //           _______     _______
    // r(4i+5): | lr-i  |   | kde-i |
    //          |_______|   |_______|
    //
    // r(4i+6): *infos-i*   *slider-i*
    //
    // etc ..

      const main = d3.select("body")
	  .append("div")
	    .attr("class", "wrapper")
	    .style("grid-template-columns", (nonempty_kde ? "repeat(2,"+wsvg+"px)" : "900px"))
	    .attr("id", "main");

    // ************************************************ //
    //              Summarize bar graph                 //
    // ************************************************ //

    // Title
    main.append("div")
   	  .style("grid-row", "1")
      	.style("grid-column", "1 / "+(nb_col+1))
  	  .attr("class", "summarizeTitle")
  	.text("Benchmarks summary");

    // Bar graph
    let bar_container = main
	.append("div")
   	  .style("grid-row", "2")
      	  .style("grid-column", "1 / "+(nb_col+1))
	  .attr("id", "bar");
    plot_summarize_bar_graph(bar_container, inputs);


    // ************************************************ //
    //              Layout for lr/kde graphs            //
    // ************************************************ //

    // Benchmark titles
    const titles = main
	  .selectAll(".mainTitle")
	  .data(inputs.series)
	  .enter()
	  .append("div")
	    .attr("id", (data, i) => "title-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+3))
      	    .style("grid-column", "1 / "+(nb_col+1))
  	    .attr("class","mainTitle")
	  .append("text")
  	    .attr("x", wsvg)
  	    .attr("y", margin.top-10)
            .text((data, i) => "#"+data.name);

    // Linear regression graph titles
    const titles_lr = main
	  .selectAll("#title_lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("id",  "title_lr")
   	    .style("grid-row", (data,i) =>""+(4*i+4))
   	    .style("grid-column", "1")
	  .append("text")
  	    .attr("class","chartTitle")
  	    .text("Linear regression");

    // Containers for linear regression graphs
    const lr_graphs = main
	  .selectAll(".lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr")
	    .attr("id", (data, i) => "linearRegression-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+5))
   	  .style("grid-column", "1");

    // Containers for linear regression info tables
    const lr_info = main
	  .selectAll(".lr-info")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr-info")
	    .attr("id", (data, i) => "lr-info-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+6))
            .style("grid-column", "1");

    let radio_div, kde_graphs, kde_controler;
    if (nonempty_kde) {
	// Containers for radio buttons to choose between histogram/kde plots
	radio_div = main
	      .selectAll(".radio_div")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class",  "radio")
	      .attr("id", (d, i) => "radio_div"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+4))
   	      .style("grid-column", "2");

	// Containers for kde/hist graph
	kde_graphs = main
	      .selectAll(".kde")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde")
	      .attr("id", (data, i) => "histKde-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+5))
   	      .style("grid-column", "2");

	// Containers for kde/hist controlers
	kde_controler = main
	      .selectAll(".kde-controler")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde-controler")
	      .attr("id", (data, i) => "kde-controler-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+6))
              .style("grid-column", "2");
    }

    // ************************************************ //
    //          Linear regression graph                 //
    // ************************************************ //
    lr_graphs.each( function(serie, i) {
	//Curves for each input
	const xMin = 0;
	const xMax = d3.max(serie.dataset, d => d.x);
	const yMin = 0;
	const yMax = d3.max(serie.dataset, d => d.y);

	// Define x axis
	const xScale = d3.scaleLinear()
  	      .domain([xMin,xMax])
  	      .range([0,innerW])
  	      .nice();
	const xAxis = d3.axisBottom()
  	      .scale(xScale)
  	      .ticks(8, "s");
	// "s" = number format such as 1000 -> 1k

	// Define y axis
	const yScale = d3.scaleLinear()
  	      .domain([yMin,yMax])
  	      .range([innerH,0])
  	      .nice();
	const yAxis = d3.axisLeft()
  	      .scale(yScale)
  	      .ticks(8, "s");

	// Svg
  	const plot = d3.select(this)
	    .append("svg")
  	      .attr("width",wsvg)
  	      .attr("height",hsvg);
	// Color background
	plot.append("rect")
  	    .attr("x",margin.left)
  	    .attr("y",margin.top)
  	    .attr("width",innerW)
  	    .attr("height",innerH)
  	    .attr("class","background axis");
	// Plot axis
	plot.append("g")
  	    .attr("transform",
	 	  "translate("+margin.left+","
	 	  +(hsvg-margin.bottom)+")")
	    .attr("class", "axis")
  	    .call(xAxis);
	plot.append("g")
  	    .attr("transform",
	  	  "translate("+margin.left+","
		  +margin.top+")")
	    .attr("class", "axis")
  	    .call(yAxis);
	// Print axis titles
	plot.append("text")
	    .attr("class", "axisTitle")
	    .attr("x", wsvg/2)
	    .attr("y", hsvg-10)
	    .text(inputs.xLabel);
	plot.append("text")
	    .attr("class", "axisTitle ytitle")
	    .attr("transform-origin", 0, hsvg/2)
	    .attr("x", 0)
	    .attr("y", hsvg/2)
	    .text(inputs.yLabel);

	// Plot data
	plot.append("g")
	    .attr("transform",
		  "translate("+margin.left+","
		  +margin.top+")")
  	    .selectAll("circle")
  	    .data(serie.dataset)
  	    .enter()
  	    .append("circle")
	    .attr("class", "circle")
  	    .attr("r", dotSize)
  	    .attr("cx", d => xScale(d.x))
  	    .attr("cy", d => yScale(d.y));

	// Plot linear regression line

	const xVals = serie.dataset.map((e,j) => e.x);
	const yVals = serie.dataset.map((e,j) => e.y);
	const pairs = [];
	xVals.forEach((d,i) => pairs.push([xVals[i],yVals[i]]));
	const linReg = ss.linearRegression(pairs);
	const linRegLine = ss.linearRegressionLine(linReg);
	let line = plot
	    .append("line")
    	      .attr("transform","translate("+margin.left+","+margin.top+")")
    	      .attr("class","regLine")
    	      .attr("x1",xScale(xMin))
    	      .attr("x2",xScale(xMin))
    	      .attr("y1",yScale(linRegLine(xMin)))
    	      .attr("y2",yScale(linRegLine(xMin)));
	line.transition().duration(1000).delay(2000)
    	      .attr("x2",xScale(xMax))
    	      .attr("y2",yScale(linRegLine(xMax)));

	// Add text boxes
	//const meanX = ss.mean(xVals).toFixed(0);
	//const meanY = ss.mean(yVals).toFixed(2);
	//const varX = ss.sampleVariance(xVals).toFixed(0);
	//const varY = ss.sampleVariance(yVals).toFixed(1);
	//const corCoeff = ss.sampleCorrelation(xVals,yVals).toFixed(3);

	const lr_results = [
	    ["Linear regression line", "y = "+linReg.b.toFixed(2)+" + "+linReg.m.toFixed(3)+"x"],
	    ["Coefficient", serie.result.estimate],
	    ["RÂ²", serie.result.r_square]
	];

	const sampling_to_string = sampling =>
              (Number.isInteger(sampling) ?  "`Linear "+sampling+"" : "`Geometric "+sampling+"");

	const format = v  => d3.format("s")(v);

	const param_benchmarks = [
	    ["LR sampling (sampling)", sampling_to_string(serie.description.sampling)],
	    ["Start (start)", serie.description.start],
	    ["Benchmark runtime (time / quota)",
	     format(serie.description.time) + " / " + format(serie.description.quota)],
	    ["Number of runs (samples)", serie.description.samples + " / " + serie.description.limit],
	    ["Stabilized GC (stabilize)", serie.description.stabilize]
	];

	const table = d3.select("#lr-info-"+i)
	      .append("table");

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Linear regression results");

	table.append("tbody")
	    .selectAll("tr")
	    .data(lr_results)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("class", "tooltip")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Benchmarks parameters")
	    .append("span")
	    .attr("class","tooltiptext")
	    .text("See [Benchmarks.stats]");

	table.append("tbody")
	    .selectAll("tr")
	    .data(param_benchmarks)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

    });

    // ************************************************ //
    //         Histogram and kde graphs                 //
    // ************************************************ //
    if (nonempty_kde) {
        kde_graphs.each(function (serie, i) {

	    // Svg for histogram and kde graphs
	    let pdfgraph = d3.select(this)
		.append("svg")
		.attr("id", "pdfgraph")
		.attr("width", wsvg)
		.attr("height", hsvg)
		.append("g")
		.attr("transform", "translate("+margin.left+","+margin.top+")");

	    // If there is no kde field in the data [serie], some note
	    // is written in the svg window.
	    if (!('kde' in serie)) {
		pdfgraph.append("text")
		    .attr("x", (margin.left+margin.right+wsvg)/2)
		    .attr("y", (margin.top+margin.bottom+hsvg)/2)
		    .attr("class", "warning")
		    .text("No available data");
	    } else if (d3.max(serie.kde) == d3.min(serie.kde)) {
		pdfgraph.append("text")
		    .attr("x", wsvg/2)
		    .attr("y", hsvg/2)
		    .attr("class", "warningtext")
		    .text("All data have same value.");
	    } else {
		const data = serie.kde;
		//Some default values
		const min_slider = (d3.max(data)-d3.min(data))/data.length;
		const max_slider = (d3.max(data)-d3.min(data))/30;
		let vslider = min_slider;

		//Radio buttons
		const form = d3.select("#radio_div"+i)
		      .append("form");

		form.append("input")
		    .attr("type", "radio")
		    .attr("name", "graph")
		    .attr("value", "hist"+i)
		    .attr("name", "graph")
		    .attr("checked", "checked")
		    .on("change", () => plot_chosen_graph(d3.select(this), "hist"));
		form.append("label")
		    .attr("for", "hist"+i)
		    .text("Histogram");
		form.append("input")
		    .attr("type", "radio")
		    .attr("value", "kde"+i)
		    .attr("name", "graph")
		    .on("change", () => plot_chosen_graph(d3.select(this), "kde"));
		form.append("label")
		    .attr("for", "kde"+i)
		    .text("KDE");

		//axis
		const min = d3.min(data),
		      max = d3.max(data);
		const minX = d3.max([0, min-max_slider]),
		      maxX = max+max_slider;

		//X axis is the same for both graphs (histogram and kde)
		const xscale = d3.scaleLinear()
		      .range([0, innerW])
		      .domain([minX, maxX])
		      .nice();
		const xAxis = d3.axisBottom()
		      .scale(xscale)
		      .ticks(8, "s");

		//Y axis has a different domain value between both graphs.
		//So yscale.domain() is defined individually for each plot.
		const yscale = d3.scaleLinear()
		      .range([0, innerH])
		      .nice();
		const yAxis = d3.axisLeft()
		      .scale(yscale)
		      .ticks(8, "s");

		//x value for kde graph
		const n = 1000;
		const x = Array(n);
		const xmin = d3.min(xscale.domain()),
		      xmax = d3.max(xscale.domain());
		for (let i=0; i<n; i++) { x[i] = xmin + i*(xmax-xmin)/n; }

		//Compute kde function for min bandwidth value to determine to determine
		//the max value of Y axis. Only happens one time when loading the webpage.
		const kde = kernelDensityEstimation(data, min_slider);
		const v = new Array(n);
		for (let i=0; i<n;i++){ v[i] = kde(x[i]);}
		const maxYkde = d3.max(v),
		      maxYhist = d3.max(histogram(data, max_slider, min, max));

		//background
		pdfgraph
		    .append("rect")
  		    .attr("x", 0)
  		    .attr("y", 0)
  		    .attr("width", innerW)
  		    .attr("height", innerH)
  		    .attr("class","background axis");

		// x Axis
		const gxAxis = pdfgraph
	              .append("g")
	              .attr("transform","translate(0"+","+innerH+")")
	              .attr("class", "axis")
	              .call(xAxis);

		// y Axis
		const gyAxis = pdfgraph
	              .append("g")
	              .attr("class", "axis")
	              .call(yAxis);

		// X Axis title
		pdfgraph.append("text")
		    .attr("class", "axisTitle")
		    .attr("x", innerW/2)
		    .attr("y", innerH+40)
		    .text("Estimated "+inputs.yLabel);

		plot_chosen_graph(d3.select(this), "hist");

		function plot_chosen_graph(container, choice) {


		    container.selectAll(".bar").remove();
		    container.select(".mypath").remove();
		    container.select(".ytitle").remove();

		    // Erasing control panels if it exists and initializing it
		    const control_container = d3.select("#kde-controler-"+i);
		    const slider = control_container.select("#slider-"+i);
		    const slidertitle = control_container.select("#slidertitle-"+i);
		    if (!slider.empty())  {
			slider.remove();
		    }
		    if (!slidertitle.empty())  {
			slidertitle.remove();
		    }

		    //Hist part
		    if (choice=="hist") {
			// Defined yAxis
			yscale.domain([maxYhist, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", 10)
			    .attr("y", innerH/2)
			    .text("Count");

			const barwidth = vslider;

			const update_hist =
			      plot_histogram(pdfgraph, data, barwidth, xscale, yscale);

			//slider
			control_container
			    .insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Barwidth");

			control_container
			    .insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) => {
				      if (value > 0) {
					  vslider=value;
					  update_hist(vslider);}}));
		    } else {
			//Defined yAxis
			yscale.domain([maxYkde, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", +10)
			    .attr("y", innerH/2)
			    .text("Density");

			const bandwidth = vslider;
			const update_kde = plot_kde(pdfgraph, data, bandwidth, xscale, yscale, x);

			//slider
			control_container.insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Bandwidth");

			control_container.insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) =>
				      {if (value > 0) { vslider=value; update_kde(vslider);}}));
		    }; // end else
		}; // end function
	    }; //end else (available kde data)
	}); //end function // end each
    }; //end if



function plot_summarize_bar_graph(container, inputs) {

    const hbar = d3.min([60*inputs.series.length, hsvg]);
    const innerHbar = hbar - marginbar.top - marginbar.bottom;

    const xb = d3.scaleLinear()
	  .range([0, innerWbar])
	  .domain([0, d3.max(inputs.series, serie => serie.result.estimate)])
	  .nice();
    const yb = d3.scaleBand()
	  .range([0, innerHbar])
	  .padding(0.2)
	  .domain(inputs.series.map(serie => serie.name));
    const xbAxis = d3.axisBottom()
	  .scale(xb)
	  .ticks(8, "s");
    const ybAxis = d3.axisLeft()
	  .scale(yb);

    const bargraph =
	container.append("svg")
	.attr("width", wbar)
	.attr("height", hbar);

    // background
    bargraph.append("rect")
  	.attr("x", marginbar.left)
  	.attr("y", marginbar.top)
  	.attr("width", innerWbar)
  	.attr("height", innerHbar)
  	.attr("class", "background axis");
    // x Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+(hbar-marginbar.bottom)+")")
	.attr("class", "axis")
	.call(xbAxis);
    // x axis title
    bargraph.append("text")
	.attr("class", "axisTitle")
	.attr("x", wbar/2)
	.attr("y", hbar-10)
	.text("Estimated "+inputs.yLabel);
    // y Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.bottom+")")
	.attr("class", "axis")
	.call(ybAxis);

    // Bargraph
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.top+")")
	.selectAll(".bar")
   	.data(inputs.series)
	.enter()
	.append("rect")
	.attr("class", "bar")
	.attr("y", serie => yb(serie.name))
	.attr("height", yb.bandwidth)
	.attr("x", serie => 0)
	.attr("width", serie => xb(serie.result.estimate))
	.attr("fill", "#4ECDC4")
	.on("mouseover", function (serie) {
	    // Specify where to put label of text
	    bargraph.append("text")
		.attr("class", "axisTitle")
		.attr("id", "tt")
		.attr("x", wbar-200)
		.attr("y", marginbar.top-10)
		.text("Value: "+d3.format(".4s")(serie.result.estimate));
	})
        .on("mouseout", function (serie) {
	    // Select text by id and then remove
	    d3.selectAll("#tt").transition().duration("50").remove();
	});

};

// [histrogram (data, barwidth, min, max)] computes histogram
// values as follows:
// - a value [v] of [data] contributes to the bar between [u] and
// [u+barwidth] if u <= v < u+barwidth
// - the [i]th bar is between [min+i*barwidth] and [min+(i+1)*barwidth]
// - [max] is used only to determine the number of bars. It MUST be greater
// than [d3.max(data)]
function histogram(data, barwidth, min, max) {
    const nbar = Math.floor((max-min)/barwidth)+1;
    let hist = new Array(nbar);
    for (let i=0; i<nbar; i++) {
	hist[i]=0;
    }

    data.forEach(function(v) {
	const ind = Math.floor((v-min)/barwidth);
	hist[ind] ++;
    });

    let n = data.length;
    for (let i=0; i<nbar; i++) {
	hist[i] = hist[i];
    }

    return hist;
}

// [plot_histogram(container, data, bandwidth, xscale, yscale)]
// draws the histogram computes with
// [histogram(data, barwidth, d3.min(data), d3.max(data)]
// in the html element [container].
//
// Axis are already defined on [container], using [xscale] and [yscale].
//
// In addition, this function returns the update function
// that redraw the bar if called with a new barwidth.
function plot_histogram(container, data, barwidth, xscale, yscale) {
    const min = d3.min(data),
	  max = d3.max(data);
    const hist = histogram(data, barwidth, min, max);
    const sample_nb = data.length;

    const print_value = function (v) {
	container.append("text")
	    .attr("class", "axisTitle")
	    .attr("id", "tt2")
	    .attr("x", wsvg-170)
	    .attr("y", 20)
	    .text("Value: "+d3.format("d")(v)+" / "+d3.format("d")(sample_nb));};

    const rects = container
	  .selectAll(".bar")
   	  .data(hist)
	  .enter();

    rects.append("rect")
	.attr("class", "bar")
	.attr("x", (v, i) => xscale(i*barwidth+min))
	.attr("width", (v, i) => xscale(barwidth)-xscale(0))
	.attr("y", (v, i) => yscale(v))
	.attr("height", (v, i) => innerH-yscale(v))
	.on("mouseover", print_value)
        .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());

    function update_hist(nbarwidth) {
	//compute new histograph values
	const nhist = histogram(data, nbarwidth, min, max);

	const rects = container
	      .selectAll(".bar")
   	      .data(nhist);

	rects.exit().remove();

	rects.enter().append("rect").attr("class", "bar")
	    .merge(rects)
	    .attr("x", (v, i) => xscale(i*nbarwidth+min))
	    .attr("width", (v, i) => xscale(nbarwidth)-xscale(0))
	    .attr("y", (v, i) => yscale(v))
	    .attr("height", (v, i) => innerH-yscale(v))
	    .on("mouseover", print_value)
            .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());
    }
    return update_hist;
};

// [kernelDensityEstimation(data, bandwith] returns the function x -> kde(x)
//    for [data]. The kernel function used is a gaussian.
function kernelDensityEstimation(X, bandwidth) {
    //gaussian constante
    const a = 1/(2*bandwidth*bandwidth);
    const b = bandwidth * SQRT_2PI;
    const gaussianKernel =
	  function (x) {
	      return Math.exp(-a * x * x) / b;
	  };

    return function (x) {
        let i = 0;
        let sum = 0;
        for (i = 0; i < X.length; i++) {
	    sum += gaussianKernel(x - X[i])/X.length;
        }
	return sum ;
    };
}

// [plot_kde(container, data, bandwidth, xscale, yscale, x)] draws
// the kde function computes with [kde(data, bandwidth)]
// for the abscisse values defined by [x], in the html element
// [container].
//
// Axis are already defined on [container], using [xscale] and
// [yscale].
//
// In addition, this function returns the update function that
// redraw the curve if called with a new bandwidth.
function plot_kde(container, data, bandwidth, xscale, yscale, x) {
    const n = x.length;
    const kde = kernelDensityEstimation(data, bandwidth);
    const density = new Array(n);

    for (let i=0; i<n;i++){
	let tmp = x[i] ;
	density[i] = [tmp, kde(tmp)];
    }

    const graph = container
	  .append('g')
	  .append("path")
	  .attr("class", "mypath")
	  .datum(density)
	  .attr("fill", "#4ECDC4")
	  .attr("opacity", ".8")
	  .attr("stroke", "#292F36")
	  .attr("stroke-width", 1)
	  .attr("stroke-linejoin", "round")
	  .attr("d",
		d3.line()
		.curve(d3.curveBasis)
		.x(d => xscale(d[0]))
		.y(d => yscale(d[1])));

    function update_kde(nbandwidth) {
	let kde = kernelDensityEstimation(data, nbandwidth);

	for (let i=0; i<n;i++){
	    density[i][1] = kde(density[i][0]);
	}

	graph.datum(density)
	    .transition()
	    .duration(50)
	    .attr("d",
		  d3.line()
		  .curve(d3.curveBasis)
		  .x(d => xscale(d[0]))
		  .y(d => yscale(d[1])));
    };

    return update_kde;
};

};


var contents = null;
contents = {"xLabel":"run","yLabel":"monotonic-clock","series":[{"name":"factorial imperative 10","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":500000000,"limit":2000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":56,"time":820901871},"dataset":[{"x":1,"y":313440},{"x":2,"y":636400},{"x":3,"y":948280},{"x":4,"y":1256349},{"x":5,"y":1563009},{"x":6,"y":1876739},{"x":7,"y":2188518},{"x":8,"y":2508258},{"x":9,"y":2800548},{"x":10,"y":3111577},{"x":11,"y":3423346},{"x":12,"y":3733586},{"x":13,"y":4044526},{"x":14,"y":4357406},{"x":15,"y":4665676},{"x":16,"y":4977375},{"x":17,"y":5288266},{"x":18,"y":5601874},{"x":19,"y":5915125},{"x":20,"y":6226124},{"x":21,"y":6528204},{"x":22,"y":6838773},{"x":23,"y":7152993},{"x":24,"y":7461523},{"x":25,"y":7778983},{"x":26,"y":8085342},{"x":27,"y":8403472},{"x":28,"y":8712392},{"x":29,"y":9017912},{"x":30,"y":9328121},{"x":31,"y":9641311},{"x":32,"y":9943040},{"x":33,"y":10244310},{"x":34,"y":10544179},{"x":35,"y":10853789},{"x":36,"y":11168698},{"x":37,"y":11473958},{"x":38,"y":11796668},{"x":39,"y":12091698},{"x":40,"y":12407487},{"x":41,"y":12725147},{"x":42,"y":13025326},{"x":43,"y":13343257},{"x":44,"y":13644425},{"x":45,"y":13966846},{"x":46,"y":14307466},{"x":47,"y":14658418},{"x":48,"y":14938766},{"x":49,"y":15227166},{"x":50,"y":15522584},{"x":51,"y":15825214},{"x":52,"y":16130723},{"x":53,"y":16454784},{"x":54,"y":16735462},{"x":55,"y":17062352},{"x":56,"y":17380502}],"kde":[317080,310400,310369,310390,311640,310380,310379,311980,310370,310379,311619,310380,310380,311619,310370,310380,311630,310439,310370,310380,311629,310379,310380,311670,310370,310369,311580,310380,310369,311660,310380,310370,311659,310389,310370,310380,311649,310370,310390,311620,310379,310390,316860,311800,311799,316570,310370,310390,311689,310400,310370,310380,311969,310379,310380,311640,310379,310370,311690,310380,310369,311650,310370,310380,316709,311820,311800,315690,312100,310379,310370,311640,310380,310359,311620,310380,310369,311779,310380,310370,311650,310379,310370,310380,311959,310370,310380,312250,310379,310390,311610,310370,310369,311550,310380,310379,311650,310380,310360,310379,311980,310390,310380,311890,310369,310370,311630,310369,310380,311640,310370,310379,311620,310380,310380,310379,311830,310380,310389,311980,310380,310370,316740,311799,311810,316460,310370,310369,311610,310390,310370,310369,311650,310380,310360,311629,310360,310370,311610,310369,310370,311640,310359,310379,311620,310400,310379,310380,311620,310380,310379,311770,310370,310379,312859,310390,310380,311740,310499,310500,310740,310389,310390,310370,311630,310359,310380,311980,310380,310379,311650,310370,310370,311649,310380,310380,310719,311279,310380,310370,311650,310369,310380,311650,310369,310390,316690,311800,311800,316839,310380,310370,310730,311929,310380,310380,311890,310379,310370,311660,310370,310379,311620,310370,310379,311969,310380,310370,310740,311299,310380,310380,311639,310370,310380,311660,310379,310370,311620,310380,310369,311640,310370,310369,310379,311640,310510,310509,312079,310500,310370,311659,310360,310390,311610,310369,310370,312800,310370,310389,310370,311640,310390,310379,311600,310380,310379,311670,310370,310370,311640,310369,310370,311640,310369,310370,310380,312080,310379,310380,311980,310370,310379,311640,310370,310379,311640,310380,310380,314700,310369,310370,310390,311779,310380,310380,311680,310369,310370,311670,310389,310379,311620,310370,310370,311639,310380,310370,310369,311640,310380,310380,311659,310380,310380,311920,310369,310370,312240,310370,310369,311660,310380,310369,310369,311610,310370,310379,311640,310370,310370,311799,310380,310360,312089,310369,310360,311630,310370,310369,310370,311690,310369,310369,311660,310370,310369,311710,310380,310370,311649,310370,310370,311690,310359,310380,310370,311629,310380,310370,311660,310369,310370,311650,310370,310369,311630,310370,310369,310749,311300,310360,310369,311359,310370,310380,312010,310379,310380,312000,310379,310370,311530,310370,310359,310380,312060,310370,310369,311740,310390,310379,311740,310370,310370,311669,310389,310380,311720,310369,310360,310380,311680,310379,310370,311670,310369,310380,311710,310370,310370,311679,310380,310370,311709,310370,310380,310390,312319,310380,310380,311660,310369,310380,312330,310360,310369,312500,310380,310369,312599,310370,310370,310389,312200,310370,310380,311889,310370,310380,311830,310369,310370,312570,310370,310389,312410,310400,310380,310389,311440,310390,310380,311869,310380,310380,312529,310380,310370,312000,310369,310370,311880,310370,310369,310390,312400,310420,310379,312060,310370,310380,312049,310370,310380,311629,310370,310370,311650,310369,310380,310390,311530,310379,310380,311650,310380,310379,311650,310380,310369,311849,310370,310380,311820,310669,310390,310370,311989,310370,310380,312280,310369,310370,311650,310370,310369,312070,310380,310369,310740,310380,310380,310379,311670,310370,310370,311659,310370,310380,311570,310369,310370,311600,310380,310369,310750,311320,310389,310379,311660,310390,310389,311990,310370,310380,311979,310370,310370,311630,310379,310370,310380,311640,310399,310380,311970,310379,310370,311630,310370,310379,311620,310370,310380,311679,310370,310360,310380,311619,310400,310370,311619,310379,310380,311630,310369,310380,311960,310360,310369,311630,310380,310380,310379,311630,310390,310380,313219,310380,310380,311669,310370,310370,311980,310369,310370,311250,310370,310359,310380,311650,310400,310379,311640,310370,310369,311669,310370,310370,311960,310379,310380,311630,310369,310380,310370,311330,310389,310360,311630,310370,310379,311670,310370,310379,311640,310380,310380,311639,310370,310380,310389,311639,310520,310500,311690,310369,310370,311930,310370,310359,312100,310370,310370,311909,310370,310370,310379,311630,310390,310380,311649,310390,310380,311660,310369,310380,311620,310369,310379,310740,311410,310369,310370,311980,310390,310369,311630,310380,310390,311629,310380,310370,311629,310380,310360,310370,311619,310369,314530,313080,311830,311799,315960,310380,310370,311670,310379,310380,311620,310369,310370,310750,311290,310359,310380,312050,310390,310389,311630,310380,310389,311660,310370,310380,311649,310369,310390,310379,311779,310380,310380,312030,310369,310380,311890,310370,310379,311640,310370,310370,311799,310370,310380,310389,311750,310370,310380,311699,310380,310380,311580,310379,310370,311660,310369,310369,311660,310370,310369,310400,311720,310380,310369,312010,310390,310370,312419,310380,310380,311610,310369,310370,311620,310390,310369,310390,311620,310379,310380,311640,310370,310379,311640,310370,310370,311649,310380,310370,311920,310369,310390,310390,311639,310380,310380,311630,310379,310380,311680,310380,310379,311670,310370,310380,311680,310359,310380,310400,312189,310370,310380,311660,310359,310380,312390,310370,310369,311820,312410,310360,311679,310380,311070,310370,311689,310370,311010,311659,310370,310380,312700,310369,310380,312070,310380,310379,311660,310370,310380,310369,311789,310380,310380,312109,310370,310370,316700,311800,311799,316540,310390,310380,311680,310369,310380,311310,311939,310380,310380,312680,310369,310370,311690,311260,310369,311670,310390,311149,312279,310380,310370,311030,311669,310380,310370,311639,310370,310380,311680,310380,310379,311960,310390,310389,312059,310390,310390,310369,311599,310370,310370,311609,310390,310360,312080,310379,310390,312190,310370,310379,313550,310380,310390,310379,312960,310390,310380,311969,311010,310370,311879,310370,311240,312220,310370,310359,313180,310400,310380,310389,312000,310400,310380,311889,310380,310380,313340,310379,310380,311960,310370,310359,316310,311810,311810,315810,311649,310400,310370,311640,310379,313580,311670,310380,310369,312270,310370,310380,312019,310990,310400,310370,311689,310960,310360,311580,310369,310950,311670,310369,310369,311670,310360,310379,311670,310370,310380,310389,311660,310370,310370,312119,310370,310370,312130,310379,310380,311330,310380,310379,311660,310370,310389,310370,311670,310370,310970,311639,310370,310380,312259,310390,310380,311650,310989,310370,311670,310370,310999,310370,311780,310370,311549,312150,310370,310390,311619,310370,310370,312159,310370,310370,311680,310379,310380,310380,311960,310379,310380,311660,310370,310369,311869,310380,310380,311389,310370,310940,311360,310369,310400,311000,311679,310369,310380,312250,310379,310369,311640,311000,310379,311650,310370,310960,310369,311320,310400,310380],"result":{"estimate":310551.5440149045,"r_square":0.9999895095968786}},{"name":"factorial functional 10","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":500000000,"limit":2000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":39,"time":1024759931},"dataset":[{"x":1,"y":1285251},{"x":2,"y":1340192},{"x":3,"y":2057034},{"x":4,"y":2663383},{"x":5,"y":3497760},{"x":6,"y":4030676},{"x":7,"y":4552643},{"x":8,"y":5348517},{"x":9,"y":6120781},{"x":10,"y":6392169},{"x":11,"y":7230146},{"x":12,"y":7897966},{"x":13,"y":8426773},{"x":14,"y":9700912},{"x":15,"y":9808026},{"x":16,"y":10593951},{"x":17,"y":11225170},{"x":18,"y":11841969},{"x":19,"y":12960004},{"x":20,"y":13379717},{"x":21,"y":13771450},{"x":22,"y":14698938},{"x":23,"y":15451022},{"x":24,"y":16265808},{"x":25,"y":16873916},{"x":26,"y":17383472},{"x":27,"y":17632990},{"x":28,"y":18576170},{"x":29,"y":19348423},{"x":30,"y":19872420},{"x":31,"y":20396936},{"x":32,"y":21335676},{"x":33,"y":21724158},{"x":34,"y":22248214},{"x":35,"y":22804211},{"x":36,"y":24026450},{"x":37,"y":24744182},{"x":38,"y":25371582},{"x":39,"y":25999702}],"kde":[618109,615159,693172,616769,688052,712532,612839,746083,616780,619689,682931,714703,612199,746173,613579,619969,695562,748913,614779,899538,619610,670521,622379,626740,649960,620139,617460,629309,800165,623570,622149,618610,754183,615870,867067,664170,618380,628679,676251,739064,623199,662411,617829,618649,617690,617619,793565,622009,614099,863938,686511,614829,621320,718372,715382,612460,675451,694651,612280,677941,688091,620120,696421,730592,620550,672141,613509,615239,666871,698432,616469,614879,622430,616119,739553,619069,871337,657930,716873,612219,666671,663780,619120,710332,695362,623269,667901,723283,615979,673541,697982,616589,679271,703402,610609,684942,687351,616100,660970,627050,621729,649351,634500,618779,805975,742623,621170,623489,685712,621309,680511,671441,613799,622790,618619,853347,668691,660211,617319,679731,732183,617069,618780,677411,616579,615729,616080,825635,729023,622990,621129,618809,625519,622910,791814,648981,615759,617789,621110,716652,844626,650901,617599,651610,659161,616289,621570,621479,783655,642110,623409,615890,701831,625239,782614,660240,625930,619629,820096,721872,622710,614209,665911,610329,627509,615690,798985,669971,654690,620169,618539,626369,788544,662681,618619,618689,826266,621830,614339,619239,623680,807955,651450,629860,610279,901938,708072,623239,621149,692672,622860,672211,724322,623090,698712,681291,613209,670481,622149,617270,701202,630500,627219,661471,620469,616089,809876,712212,618519,732393,691032,615769,636610,622209,621500,624969,618100,832986,690391,617450,617309,637120,626049,840667,686791,690112,620489,621930,728982,624570,626899,703012,618890,665801,681511,621159,667421,619890,622419,890258,634930,622399,617890,677571,614949,614489,618450,825005,709342,641091,612279,673531,690581,622030,681931,624650,620169,934569,710262,614940,732633,839146,700482,616039,669761,669081,618319,719953,719252,619780,657330,718032,620680,641290,681841,623040,615239,695572,613189,619829,617309,863647,666090,669011,622790,704322,717882,618700,631709,616480,616019,618809,623170,823445,720633,672221,620489,621970,640110,623429,617410,621229,728383,865297,617859,617590,641170,616209,620899,866487,733563,635740,618719,663931,621120,698921,681441,625059,617840,643540,616199,620129,619059,725143,869437,623009,627090,707702,658771,616229,664821,729943,624749,708802,733053,615449,682472,637530,616389,627920,669321,619049,625139,622479,869877,621480,711292,621029,623800,647660,616029,627990,637580,822735,704573,671491,618269,708202,661551,623009,692612,623039,623030,616209,617599,814066,691421,624720,620709,620830,619049,829026,731033,625409,619180,664861,669670,624419,623420,621359,868437,642820,669961,612099,663081,685591,617320,661240,622530,622199,890048,647870,624840,652710,619730,616189,625629,618849,836546,626450,671921,620139,683151,621430,616399,866087,721563,618549,668241,703422,624740,676541,639930,622979,622820,679181,619089,663231,616179,617949,813165,741573,620159,629780,720493,624119,729043,623560,617749,641710,623019,620570,862327,714152,621249,669541,623150,625379,701162,628780,621139,634399,624570,621769,720023,619039,834056,696752,649210,624320,658190,670561,630100,677711,619109,621839,864157,625170,625189,675551,736543,629060,651220,619820,618959,626230,617419,807985,676831,733603,621030,622009,659031,620109,625460,619059,831096,691462,659530,620140,638970,627109,625340,878847,622910,622799,729313,712222,620770,666341,624779,623340,700421,627039,617219,646211,620099,621849,772925,616499,624859,810876,714412,616019,725513,723003,612109,650540,714152,622839,619749,738663,624950,689392,699361,622000,622949,736723,620630,672681,682191,619109,622910,679101,617189,634310,622130,813365,622860,640070,613689,626509,618850,735703,926819,680021,625359,640281,633059,620520,622219,655061,621419,621170,621169,793945,675431,643840,617049,621820,621099,735913,631180,622509,696202,770264,615889,616660,785224,620000,621069,830696,673151,621059,690751,617749,616219,615389,623789,829666,734693,627060,620119,698952,621500,623049,619300,637349,840857,680551,707702,615989,656151,659750,614350,650850,674361,617339,623570,625159,865048,664030,693352,618529,631740,739963,623010,653240,621550,616259,619249,622610,821865,680642,722852,621050,619539,630460,616229,627269,623210,723003,846976,664261,624659,622149,646070,623190,619269,619089,730603,880048,633509,613620,618369,642540,621149,626989,623010,745623,626310,626999,743043,616760,622889,700342,790355,619709,621029,886268,665741,620379,683632,623469,618280,642350,620199,618959,864067,714973,622779,683262,634569,624390,624459,668911,623360,633090,618859,898788,716263,738153,620139,827846,617769,616189,617740,876947,620610,622419,678411,770724,620160,629859,619430,623009,640920,621150,837096,687501,690132,615709,647910,625209,619229,625450,623689,864366,689542,625480,612089,635529,622879,622859,841717,662301,619439,691442,620039,616779,624450,635830,881437,690422,704582,618599,732803,693482,618999,704832,775234,614670,622109,818496,621739,616009,622620,613059,760864,622739,627080,839306,616799,653641,618669,618169,627170,784075,634119,618090,839946,678861,726793,614139,636840,657271,623679,674421,723673,620409,718823,626889,610219,623100,623469,620780,766594,625949,621500],"result":{"estimate":664119.3921129503,"r_square":0.9992031140641413}},{"name":"factorial imperative 50","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":500000000,"limit":2000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":29,"time":1010637281},"dataset":[{"x":1,"y":1159976},{"x":2,"y":2312773},{"x":3,"y":3473878},{"x":4,"y":4627284},{"x":5,"y":5772840},{"x":6,"y":6936097},{"x":7,"y":8088123},{"x":8,"y":9230678},{"x":9,"y":10377174},{"x":10,"y":11531170},{"x":11,"y":12679585},{"x":12,"y":13845542},{"x":13,"y":14979418},{"x":14,"y":16129333},{"x":15,"y":17280619},{"x":16,"y":18431755},{"x":17,"y":19585441},{"x":18,"y":20731597},{"x":19,"y":21891313},{"x":20,"y":23038139},{"x":21,"y":24185054},{"x":22,"y":25333420},{"x":23,"y":26491686},{"x":24,"y":27651063},{"x":25,"y":28787878},{"x":26,"y":29938324},{"x":27,"y":31083670},{"x":28,"y":32242416},{"x":29,"y":33390042}],"kde":[1151856,1152786,1151736,1151766,1152876,1151766,1151726,1152006,1151666,1151596,1152876,1151706,1151705,1151735,1151656,1151707,1151705,1152836,1151685,1151706,1152066,1152026,1152416,1152906,1151686,1157046,1153075,1152315,1151856,1151746,1156537,1151755,1151706,1152206,1152066,1151705,1153186,1151715,1152116,1151736,1151686,1151706,1151676,1153226,1151466,1151626,1151746,1152296,1152336,1154356,1152086,1152556,1151936,1152216,1152036,1152406,1153396,1151706,1151676,1151736,1151696,1151696,1152916,1152046,1151836,1152106,1151726,1151696,1151676,1153256,1151676,1151706,1151686,1151706,1151716,1152916,1151696,1152556,1151696,1152066,1151666,1151846,1153545,1151706,1151726,1151706,1151685,1151836,1155085,1152196,1151735,1152096,1151776,1152257,1151835,1153047,1151705,1151706,1151686,1151706,1151696,1152806,1151726,1151706,1151686,1152216,1151676,1151736,1153566,1151696,1151666,1151726,1151716,1151956,1152906,1151676,1151986,1152156,1151686,1151936,1151926,1153956,1151846,1151696,1151726,1151676,1151706,1152326,1151666,1152436,1151756,1152856,1151656,1152036,1152886,1151676,1152006,1152166,1151726,1151705,1152036,1152515,1151407,1151736,1151735,1152035,1152336,1153695,1151686,1151706,1151726,1151726,1151986,1151716,1152876,1151626,1152026,1151716,1151716,1151696,1153406,1151716,1151696,1151696,1151686,1152016,1152026,1152876,1151676,1151696,1151686,1151686,1151706,1153106,1153606,1151776,1151766,1151786,1151716,1151726,1153286,1151696,1151676,1151706,1151696,1151636,1152906,1151686,1152076,1152236,1152126,1151706,1151756,1152956,1151806,1152115,1151665,1151396,1151666,1153226,1151716,1151696,1152266,1151716,1151696,1151716,1152626,1151976,1152086,1152076,1151746,1151626,1152956,1151706,1151706,1151686,1152016,1152016,1152746,1152886,1151706,1151676,1151696,1151686,1152016,1152846,1151716,1151706,1151686,1151586,1151806,1151676,1152936,1151676,1151726,1151696,1151716,1151686,1153556,1151696,1151715,1151696,1151696,1151996,1152055,1152877,1151705,1151556,1151696,1151686,1151726,1152856,1152086,1151676,1151686,1151706,1151666,1152146,1153046,1151406,1151726,1152026,1151406,1151786,1152436,1153686,1152036,1152086,1152276,1152086,1151716,1153266,1151676,1151696,1151726,1151636,1151716,1151726,1152876,1151676,1151676,1151876,1152116,1151696,1152846,1152286,1152036,1151716,1151676,1151675,1151696,1152606,1151746,1151696,1152095,1152115,1152026,1152876,1151716,1152086,1151696,1151716,1151586,1151916,1154486,1151746,1151676,1151696,1151696,1151686,1153256,1152186,1151726,1152206,1151696,1151696,1151706,1152926,1151676,1151716,1151726,1151636,1151696,1152906,1151846,1152156,1151716,1152026,1151706,1151686,1154136,1152376,1152026,1151896,1152256,1152116,1153466,1152576,1152006,1151956,1151866,1152826,1151706,1152896,1151686,1151686,1151686,1151706,1152545,1153047,1151746,1151746,1151766,1151745,1152085,1152046,1154135,1151606,1154716,1151776,1151736,1151727,1152915,1151706,1151686,1151656,1152046,1151736,1151846,1153766,1151686,1151666,1151716,1152006,1151716,1152856,1151706,1151696,1151386,1151686,1151756,1152006,1153676,1151716,1151696,1151716,1151686,1151706,1152886,1151696,1152046,1152646,1151696,1151686,1151606,1152876,1152446,1151926,1151696,1155216,1152926,1153606,1152036,1151926,1152336,1152176,1151946,1151976,1153706,1151866,1152016,1151826,1151996,1151716,1158246,1151726,1152036,1151716,1151696,1151706,1151686,1153506,1151686,1151696,1152356,1151706,1152065,1152087,1152565,1151417,1151335,1151715,1151736,1151656],"result":{"estimate":1151849.677264757,"r_square":0.9999983614863542}},{"name":"factorial functional 50","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":500000000,"limit":2000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":24,"time":1033986150},"dataset":[{"x":1,"y":2092475},{"x":2,"y":3537221},{"x":3,"y":5274795},{"x":4,"y":7025799},{"x":5,"y":8737322},{"x":6,"y":10785596},{"x":7,"y":12533031},{"x":8,"y":14123800},{"x":9,"y":15969188},{"x":10,"y":17327860},{"x":11,"y":19385905},{"x":12,"y":21203531},{"x":13,"y":23009798},{"x":14,"y":24859295},{"x":15,"y":26148746},{"x":16,"y":28421697},{"x":17,"y":29439478},{"x":18,"y":31565024},{"x":19,"y":33020200},{"x":20,"y":34744754},{"x":21,"y":37184500},{"x":22,"y":38627855},{"x":23,"y":40216605},{"x":24,"y":42463765}],"kde":[1704723,1692523,1710813,1705703,1728194,1818197,1740384,1713234,1748285,1683882,1910630,1771525,1695553,1722254,1766445,1822887,1704353,1741554,1775146,1771545,1793596,1720434,1720554,1777075,1802836,1700543,1758294,1939251,1799096,1788046,1693023,1727804,1729514,1882079,1687422,1789996,2065575,1852817,1788966,1728544,1683873,1784386,1702913,1792096,1752364,1844498,1995292,1986022,2075615,1813587,1802806,1782206,1733184,1772805,1878219,1757554,1862398,1690933,1720393,1780296,1759375,1685942,1754495,1722704,1836027,1690753,1788486,1709623,1880029,1737284,1791386,1754105,1761795,1847478,1780225,1827067,1680613,1711413,1801496,1879409,1706203,1781456,1797356,1706723,1741955,1732994,1683482,1801757,1799276,1708623,1684663,1803126,1822377,1792766,1760225,1682472,1743825,1716503,1773285,1756375,1736084,1710123,1683873,1775925,1703903,1833818,1684932,1811427,1722424,1812836,1826047,1683513,1732274,1828827,1804456,1685253,1732104,1706993,1812647,1685663,1736554,1729804,1731394,1783326,1691012,1880079,1773125,1748715,1772105,1913480,1797086,1812097,1753944,1811947,1714073,1732444,1688102,1863738,1769085,1845767,1800587,1710753,1893859,1723764,1730014,1884929,1703183,1744104,1789856,1775316,1709743,1731034,1688823,1798816,1719844,1732044,1811426,1716464,1693123,1803166,1742735,1837497,1724534,1742324,1844308,1705133,1714274,1845757,1744865,1750844,1860898,1735745,1745434,1749255,1843327,1707004,1809476,2078595,1761175,1814986,1696643,1735144,1690182,1751534,1785796,1763805,1722784,1791336,1849227,1726574,1729744,1793386,1703113,1693862,1752965,1741405,1822476,1687963,1801066,1765175,1801307,1696443,1788606,1926040,1714433,1903309,1704873,1872648,1706034,1788325,1780796,1708753,1695353,1875909,1781775,1719534,1733424,1712424,1886449,1743164,1803786,1812797,1700633,1679743,1785435,1721664,1707063,1708384,1717513,1761915,1716434,1705063,1695783,1709483,1731494,1870659,1718933,1719893,1865298,1789355,1760675,1889919,1714854,1684382,1793306,1761355,1803187,1876248,1725704,1858338,1778466,1728654,1827217,1768555,1797896,1999542,2058574,1776925,1849728,1809567,1686472,1701963,1789286,1711103,1695264,1770675,1704643,1880439,1700083,1766265,1700923,1796316,1792936,1761045,1915090,1799306,1768115,1744105,1850097,1754304,1851258,1698653,1736634],"result":{"estimate":1756481.793673469,"r_square":0.9996435224532819}},{"name":"factorial imperative 100","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":500000000,"limit":2000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":21,"time":1013238332},"dataset":[{"x":1,"y":2198059},{"x":2,"y":4405168},{"x":3,"y":6578095},{"x":4,"y":8767584},{"x":5,"y":10947532},{"x":6,"y":13131349},{"x":7,"y":15327188},{"x":8,"y":17507426},{"x":9,"y":19685364},{"x":10,"y":21879042},{"x":11,"y":24056311},{"x":12,"y":26239489},{"x":13,"y":28424177},{"x":14,"y":30605265},{"x":15,"y":32795643},{"x":16,"y":34976631},{"x":17,"y":37163749},{"x":18,"y":39348128},{"x":19,"y":41533676},{"x":20,"y":43715754},{"x":21,"y":45903282}],"kde":[2185659,2185628,2187118,2185578,2185649,2186278,2185528,2186808,2185939,2185688,2185628,2185608,2187658,2185648,2185608,2185558,2185978,2186649,2187828,2186948,2185928,2186328,2186268,2188678,2185619,2185818,2186308,2185608,2187489,2185628,2185668,2185918,2185598,2185599,2186698,2186108,2186258,2185699,2186168,2187138,2186898,2185619,2185598,2185998,2186508,2185969,2185978,2185778,2186178,2185639,2186988,2185978,2185648,2186119,2185898,2186868,2185558,2185648,2186348,2185598,2187238,2185588,2185728,2186848,2185868,2185608,2187199,2186048,2185618,2185628,2185629,2186858,2186108,2185748,2186049,2186398,2187238,2185628,2186559,2185548,2185608,2185948,2187149,2185518,2185598,2185328,2186259,2186828,2185578,2186378,2185708,2185708,2186848,2186768,2185338,2185629,2186058,2186058,2186778,2185939,2185598,2185638,2185538,2187149,2186358,2185638,2185578,2185609,2187438,2186578,2185618,2185979,2185868,2185618,2186788,2185648,2185348,2185628,2185618,2188028,2185618,2185648,2185888,2185618,2187679,2185588,2186008,2185888,2185629,2185618,2186808,2186058,2185639,2187238,2186578,2189008,2186579,2187008,2186178,2186519,2187168,2185528,2186418,2185619,2185628,2185968,2186878,2185658,2185939,2185888,2186318,2186728,2185629,2185618,2186848,2186528,2186789,2186218,2185628,2185658,2185529,2185578,2187618,2185618,2185889,2186298,2185228,2186888,2185838,2186128,2185458,2185608,2187128,2185609,2185628,2185608,2185608,2186939,2186778,2185638,2186188,2185638,2185788,2186948,2186708,2185669,2185578,2185328,2187648,2185589,2186038,2185888,2185948,2185628,2186778,2186048,2186198,2185599,2185608,2187318,2187038,2185609,2185608,2185958,2186808,2185588,2185999,2187238,2186268,2186528,2187959,2186428,2186368,2186459,2186298,2186828,2185638,2185719,2185888,2198888,2186829,2185878,2185638,2190469,2185648,2185608,2187168,2185609,2186168],"result":{"estimate":2186397.799456357,"r_square":0.9999989138550668}},{"name":"factorial functional 100","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":500000000,"limit":2000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":15,"time":1033728561},"dataset":[{"x":1,"y":4493280},{"x":2,"y":8899758},{"x":3,"y":13435199},{"x":4,"y":17785515},{"x":5,"y":21623025},{"x":6,"y":25686842},{"x":7,"y":30542503},{"x":8,"y":35277160},{"x":9,"y":39968317},{"x":10,"y":43916500},{"x":11,"y":47688078},{"x":12,"y":52784347},{"x":13,"y":57700510},{"x":14,"y":61675914},{"x":15,"y":65308538}],"kde":[4367106,4266263,4435839,4275073,4726548,4395817,4606053,4276443,4473780,4617964,4404777,4382127,4352136,4436808,4386317,4546012,4448769,4539141,4388117,4329526,4679995,4387967,4587673,4625334,4558412,4385917,4452789,4290064,4223492,4623464,4410128,4348355,4158780,4417648,4331005,4243323,4462269,4217002,4180070,4511251,4167440,4317875,4293424,4362606,4433588,4281734,4393477,4365106,4304824,4267814,4466339,4214902,4652015,4305474,4210991,4418887,4287294,4440699,4462909,4213442,4391447,4512570,4281744,4392027,4369926,4555522,4171020,4222732,4214241,4378397,4283433,4410058,4331995,4370567,4460669,4230272,4385667,4395307,4433498,4213162,4383727,4187250,4398237,4410148,4184801,4446578,4386517,4301715,4517251,4223531,4118878,4299044,4291214,4633775,4344555,4542812,4236772,4288554,4383257,4308294,4551092,4323845,4492931,4284113,4458999,4559843,4176790,4399207,4676836,4324545,4223902,4398237,4291864,4400968,4351445],"result":{"estimate":4388749.84032258,"r_square":0.9996177794934421}}]}


if (contents == null)
    d3.json("outputs.json", render);
else
    render(contents);
}

  </script>

</body>
</html>
